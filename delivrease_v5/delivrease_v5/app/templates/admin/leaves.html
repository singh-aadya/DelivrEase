{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-extrabold mb-4">Leave Requests</h1>
<div class="overflow-x-auto rounded-xl border border-white/10">
<table class="min-w-full">
  <thead class="bg-white/10"><tr><th class="p-3">Agent</th><th class="p-3">From</th><th class="p-3">To</th><th class="p-3">Reason</th><th class="p-3">Status</th><th class="p-3">Action</th></tr></thead>
  <tbody>
  {% for r in requests %}
    <tr class="border-b border-white/10">
      <td class="p-3">{{ r.user.username }}</td>
      <td class="p-3">{{ r.date_from }}</td>
      <td class="p-3">{{ r.date_to }}</td>
      <td class="p-3">{{ r.reason }}</td>
      <td class="p-3">
        <span class="px-2 py-1 rounded-lg text-xs 
          {% if r.status=='approved' %} bg-emerald-500/20 text-emerald-300 border border-emerald-400/30
          {% elif r.status=='declined' %} bg-rose-500/20 text-rose-300 border border-rose-400/30
          {% else %} bg-amber-500/20 text-amber-300 border border-amber-400/30 {% endif %}">{{ r.status }}</span>
      </td>
      <td class="p-3">
        {% if r.status == 'pending' %}
        <form method="post" class="inline-flex gap-2" action="{{ url_for('admin.leaves') }}">
          <input type="hidden" name="req_id" value="{{ r.id }}">
          <button class="px-3 py-1 rounded-lg bg-emerald-400 text-slate-900" name="action" value="approved">Approve</button>
          <button class="px-3 py-1 rounded-lg bg-rose-400 text-slate-900" name="action" value="declined">Decline</button>
        </form>
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
